!function(a){var c,d,s,g,u;a.hasInitialized||(a.copyToClipboard=function(e){document.getElementById(e).select(),document.execCommand("Copy")},g=0,u=!1,a.combinationsUpdate=function(){if(c){var o=document.getElementById("combinations-table-filter-talents").value,n=new RegExp("^"+o.replace(new RegExp("x|\\*","ig"),"[0-3]"),"i"),i=d.val(),l=s.val(),a=$.grep(c,function(e){if(""!==o&&!n.test(e[1]))return!1;if(i.indexOf(e[2])<0)return!1;var t=e[3].split(", ");return!($(l).filter(t).length<t.length&&"None"!==e[3])}),r=document.getElementById("combinations-table-data"),e=$(document.getElementById("combinations-table-nav"));e.data("twbs-pagination")&&e.twbsPagination("destroy"),e.twbsPagination({totalPages:Math.max(1,Math.ceil(a.length/15)),visiblePages:3,onPageClick:function(e,t){var o="";a.slice(15*(t-1),15*t).forEach(function(e){o+="<tr>",o+="<td>"+e[0]+"</td>",o+="<td>"+e[1]+"</td>",o+="<td>"+e[2]+"</td>",o+="<td>"+e[3]+"</td>",o+="<td>"+v(e[4])+"</td>",u&&(o+="<td>",6===e.length&&(o+=v(e[5])),o+="</td>"),e[4]==g?o+="<td></td>":o+="<td>"+(100*e[4]/g-100).toFixed(1)+"%</td>",o+="</tr>"}),r.innerHTML=o}})}},a.combinationsInit=function(e){$.get("/"+e,function(e){var t,o=[],n=[];(c=e.results).forEach(function(e){$.inArray(e[2],o)<0&&o.push(e[2]),e[3].split(", ").forEach(function(e){"None"!==e&&$.inArray(e,n)<0&&n.push(e)}),e[4]>g&&(g=e[4]),u||6!==e.length||(u=!0)}),o.sort().reverse(),o.forEach(function(e){document.getElementById("combinations-table-filter-sets").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),(d=$("#combinations-table-filter-sets")).selectpicker("val",o),d.selectpicker("refresh"),n.sort(),n.forEach(function(e){document.getElementById("combinations-table-filter-legendaries").insertAdjacentHTML("beforeend","<option>"+e+"</option>")}),s=$("#combinations-table-filter-legendaries"),-1<(t=n.indexOf("Cinidaria"))&&n.splice(t,1),s.selectpicker("val",n),s.selectpicker("refresh");var i=document.getElementById("combinations-table-headers"),l=document.getElementById("combinations-table-filters");u&&(i.insertAdjacentHTML("beforeend","<th>Boss DPS</th>"),l.insertAdjacentHTML("beforeend","<th></th>")),i.insertAdjacentHTML("beforeend","<th></th>"),l.insertAdjacentHTML("beforeend","<th></th>"),a.combinationsUpdate(),w()})},a.racesInit=function(e,h,b){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var t;(e=new google.visualization.arrayToDataTable(e.results)).sort({column:1,desc:!0}),e.insertColumn(2,{type:"string",role:"tooltip",p:{html:!0}}),e.insertColumn(3,{type:"string",role:"style"});var o=["Human","Dwarf","Night Elf","Gnome","Worgen","Draenei","Lightforged Draenei","Void Elf"],n=["Orc","Troll","Tauren","Goblin","Undead","Blood Elf","Highmountain Tauren","Nightborne"];for(t=0;t<e.getNumberOfRows();t++){var i="",l=e.getValue(t,0);i=0<=$.inArray(l,o)?"stroke-width: 3; stroke-color: #1144AA; color: #3366CC":0<=$.inArray(l,n)?"stroke-width: 3; stroke-color: #770000; color: #AA0000":"stroke-width: 3; stroke-color: #4d4d4d; color: #808080";var a=e.getValue(t,1),r=100*((b+a)/b-1),c='<div class="chart-tooltip"><b>'+l+"</b><br><b>Increase:</b> "+v(r.toFixed(2))+"% ("+v(a)+")</div>";e.setValue(t,3,i),e.setValue(t,2,c),e.setValue(t,1,r)}var d=document.getElementById("simulations-metas"),s=d.innerWidth-2*window.getComputedStyle(d,null).getPropertyValue("padding-left"),g=768<=document.documentElement.clientWidth?s:700,u="#222222",m="#cccccc",f={title:h,backgroundColor:u,chartArea:{top:50,bottom:100,left:150,right:50},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:m},title:"% DPS Gain",titleTextStyle:{color:m},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:m},titleTextStyle:{color:m}},annotations:{highContrast:!1,stem:{color:"transparent",length:-12},textStyle:{fontName:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:10,bold:!0,color:u,auraColor:"transparent"}},titleTextStyle:{color:m},tooltip:{isHtml:!0},legend:{position:"none"},isStacked:!0,width:g};new google.visualization.BarChart(document.getElementById("google-chart")).draw(x(e),f),w(),C(f.chartArea)})})},a.trinketsInit=function(e,p,y){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){$.get("/"+e,function(e){var t,o,n=(e=new google.visualization.arrayToDataTable(e.results)).addColumn("number");for(o=0;o<e.getNumberOfRows();o++){var i=0;for(t=1;t<n;t++)e.getValue(o,t)>i&&(i=e.getValue(o,t));e.setValue(o,n,i)}for(e.sort([{column:n,desc:!0}]),e.removeColumn(n),t=2;t<=e.getNumberOfColumns();t+=2)e.insertColumn(t,{type:"string",role:"tooltip",p:{html:!0}});for(o=0;o<e.getNumberOfRows();o++){var l=0,a=0;for(t=1;t<e.getNumberOfColumns();t+=2){var r=e.getValue(o,t),c=r-a,d=100*((y+r)/y-1),s=d-l,g='<div class="chart-tooltip"><b>'+e.getValue(o,0)+"<br> Item Level "+e.getColumnLabel(t)+"</b><br><b>Total:</b> "+v(d.toFixed(2))+"% ("+v(r.toFixed())+")<br><b>Increase:</b> "+v(s.toFixed(2))+"% ("+v(c.toFixed())+")</div>";e.setValue(o,t+1,g),e.setValue(o,t,s),l=l<d?d:l,a=a<r?r:a}}var u=document.getElementById("simulations-metas"),m=u.innerWidth-2*window.getComputedStyle(u,null).getPropertyValue("padding-left"),f=768<=document.documentElement.clientWidth?m:700,h="#cccccc",b={title:p,backgroundColor:"#222222",chartArea:{top:50,bottom:100,right:150,left:200},hAxis:{gridlines:{count:20},format:"#.#'%'",textStyle:{color:h},title:"% DPS Gain",titleTextStyle:{color:h},viewWindowMode:"maximized",viewWindow:{min:0}},vAxis:{textStyle:{fontSize:12,color:h},titleTextStyle:{color:h}},legend:{textStyle:{color:h}},titleTextStyle:{color:h},tooltip:{isHtml:!0},isStacked:!0,width:f};new google.visualization.BarChart(document.getElementById("google-chart")).draw(x(e),b),w(),C(b.chartArea)})})},a.hasInitialized=!0,window.herodamage=a);function v(e){return new Intl.NumberFormat("en-US").format(e)}function w(){var e=document.getElementById("herodamage-loading");e.parentNode.removeChild(e)}function x(e){var t=new google.visualization.DataView(e),o=t.getFilteredRows([{column:1,value:null}]);return t.hideRows(o),t.toDataTable()}function C(a){var r=document.getElementById("google-chart"),c=document.getElementById("chart-overlay");r.onmousemove=function(e){var t=r.getBoundingClientRect(),o=t.left+a.left+window.scrollX,n=t.right-a.right+window.scrollX,i=t.top+a.top+window.scrollY,l=t.bottom-a.bottom+window.scrollY;e.pageX>=o&&e.pageX<=n&&e.pageY>=i&&e.pageY<=l?(c.style.display="block",c.style.top=i+"px",c.style.left=e.pageX+"px",c.style.height=r.offsetHeight-a.top-a.bottom+"px"):c.style.display="none"}}}(window.herodamage||{});